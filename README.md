# cl-swagger-codegen #
lisp code-generator for swagger

A swagger codegen is to build APIs quicker and improve consumption of your Swagger-defined APIs in every popular language with Swagger Codegen. (http://swagger.io/swagger-codegen/)

cl-swagger-codegen generates API client for common lisp. 

## Generate Client Code ##


### From swagger url ###
You can build a client, (for example `test1.lisp`) against the swagger url as follows:

```
(generate-client "http://petstore.swagger.io/v2/swagger.json" "test1.lisp")
```

### From swagger json file ###
You can build a client, (for example `test2.lisp`) against the swagger json file located path "./mapr.json" :

```
(generate-client #p"./mapr.json" "test2.lisp")
```


## call APIs ##


For example, from the client generated by cl-swagger-codegen, you can add a new pet to the store as follows: 
We are using `cl-json` (https://common-lisp.net/project/cl-json/) to edit json structure. 

```
(setf body (cl-json:encode-json-to-string '((id . 0)
                                            (:category . ((:id . 0) (:name . "string")))
                                            (:name . "doggie")
                                            ("photoUrls" . #("string"))
                                            (:tags . (((:id . 0)
                                                       (:name . "string"))))
                                            (:status . "available"))))

(convert-json #'post-pet-call "/pet" body)

```

For json object, cl-swagger-codegen uses `cl-json`. 

```
(cl-json:encode-json-to-string '((id . 0)
                                (:category . ((:id . 0) (:name . "string")))
                                (:name . "doggie")
                                ("photoUrls" . #("string"))
                                (:tags . (((:id . 0)
                                (:name . "string"))))
                                (:status . "available")))
```

for json object :

```
{
  "id": 0,
  "category": {
    "id": 0,
    "name": "string"
  },
  "name": "doggie",
  "photoUrls": [
    "string"
  ],
  "tags": [
    {
      "id": 0,
      "name": "string"
    }
  ],
  "status": "available"
}
```
